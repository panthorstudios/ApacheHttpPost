apply plugin: 'java'

version='1.0'

repositories {
    mavenCentral()
}

dependencies {
    compile (
         'org.apache.httpcomponents:httpclient:4.5'
//        'com.amazonaws:aws-lambda-java-core:1.0.0',
//        'com.amazonaws:aws-lambda-java-events:1.0.0'
    )
}

task fatJar(type:Jar) {
    manifest {
        attributes 'Implementation-Title': 'PostRest',  
        	'Implementation-Version': version,
        	'Main-Class': 'com.amway.aws.utils.ApacheHttpPost'
    }
    baseName = project.name + '-all'
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
    with jar
}


task buildZip(type: Zip) {
    from compileJava
    from processResources              
    into('lib') {
        from configurations.runtime
    }           
}

build.dependsOn buildZip
